m <- mapview::mapview(sites[1,])
coords <- c(boundary[2],
boundary[3])
m@map %>% setView(coords[1], coords[2], zoom = 2)
m <- mapview::mapview(sites[1,])
coords <- c(boundary[3],
boundary[2])
m@map %>% setView(coords[1], coords[2], zoom = 2)
m <- mapview::mapview(sites[1,])
coords <- c(boundary[3],
boundary[2])
m@map %>% setView(coords[1], coords[2], zoom = 16)
m <- mapview::mapview(sites[1,],map.type = "Esri.WorldImagery")
coords <- c(boundary[3],
boundary[2])
m@map %>% setView(coords[1], coords[2], zoom = 16)
library(lidR)
library(MFFProads)
library(dplyr)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp")
plot(shp,add=TRUE)
plot(ctg)
plot(shp,add=TRUE)
plot(ctg)
plot(shp,add=TRUE)
plot(ctg)
plot(shp,add=TRUE)
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp")
plot(ctg)
plot(shp,add=TRUE)
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
plot(ctg)
plot(shp,add=TRUE)
#--- test on single road ---#
road <- shp %>%
dplyr::filter(OBJECTID ==  29976)
plot(ctg)
plot(road,add=TRUE)
# res <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
# img <- rast("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/RGBN_tile_1kmZ174330530902018L.tif")
#
# RGB(img) <- c(2,3,4)
#
# plot(img)
# plot(road,add=TRUE,col = "red")
# plot(res,add=TRUE,col = "blue")
# mapview::mapview(list(road, res),
#                  layer.name = c("Inaccurate", "Corrected"),
#                  color = c("red", "blue"), map.type = "Esri.WorldImagery")
#
#
# options(MFFProads.debug.finding = TRUE)
# options(MFFProads.debug.measuring = FALSE)
# options(MFFProads.debug.metrics = FALSE)
# res1 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
#
# options(MFFProads.debug.finding = FALSE)
# options(MFFProads.debug.measuring = TRUE)
# options(MFFProads.debug.metrics = FALSE)
# res2 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
#
# options(MFFProads.debug.finding = FALSE)
# options(MFFProads.debug.measuring = FALSE)
# options(MFFProads.debug.metrics = TRUE)
# res3 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
img <- rast("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/RGBN_tile_1kmZ174330530902018L.tif")
library(terra)
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
plot(ctg)
plot(shp,add=TRUE)
#--- test on single road ---#
road <- shp %>%
dplyr::filter(OBJECTID ==  29976)
plot(ctg)
plot(road,add=TRUE)
img <- terra::rast("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/RGBN_tile_1kmZ174330530902018L.tif")
RGB(img) <- c(2,3,4)
plot(img)
plot(road,add=TRUE,col = "red")
# plot(res,add=TRUE,col = "blue")
res <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
mapview::mapview(road,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
# plot(res,add=TRUE,col = "blue")
m <- mapview::mapview(road,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
library(leaflet)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
plot(ctg)
plot(shp,add=TRUE)
m <- mapview::mapview(road,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
mapview::mapview(list(road, res),
layer.name = c("Shapefile", "Corrected"),
color = c("red", "blue"), map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
res
mapview::mapview(list(road, res),
layer.name = c("Shapefile", "Corrected"),
color = c("red", "blue"), map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
m <- mapview::mapview(list(road, res),
layer.name = c("Shapefile", "Corrected"),
color = c("red", "blue"), map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
m <- mapview::mapview(shp,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
shp
mapview::mapview(shp,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
library(leaflet)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
plot(ctg)
plot(shp,add=TRUE)
mapview::mapview(shp, layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(mvFeatureId ==  29)
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(mvFeatureId == 29)
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(OBJECTID ==  30032)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89437,
47.936)
m@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(OBJECTID ==  30032)
plot(ctg)
plot(road1,add=TRUE)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.892,
47.934)
m@map %>% setView(coords[1], coords[2], zoom = 17)
road1
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(road1,add=TRUE)
mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
m <- mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.892,
47.934)
m@map %>% setView(coords[1], coords[2], zoom = 17)
road1
road1
#--- test on single road ---#
road2 <- shp %>%
dplyr::filter(OBJECTID == 29976)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(road2,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.892,
47.934)
m@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
road2 <- shp %>%
dplyr::filter(OBJECTID == 29976)
plot(ctg)
plot(road1,add=TRUE)
shp %>%
dplyr::filter(OBJECTID == 29976)
plot(road2)
#--- test on single road ---#
road2 <- shp %>%
dplyr::filter(OBJECTID == 29976)
plot(ctg)
plot(road2,add=TRUE)
mapview::mapview(road2,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
#--- test on single road ---#
road2 <- shp %>%
dplyr::filter(OBJECTID == 29976)
plot(ctg)
plot(road2,add=TRUE)
m <- mapview::mapview(road2,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89471,
47.93648)
m@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
road1 <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(road1,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(road1,add=TRUE)
m <- mapview::mapview(roadx,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m@map %>% setView(coords[1], coords[2], zoom = 17)
roadx
m1 <- mapview::mapview(roadx,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m1@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(road1,add=TRUE)
m1 <- mapview::mapview(roadx,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m1@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
road2 <- shp %>%
dplyr::filter(OBJECTID == 29976)
plot(ctg)
plot(road2,add=TRUE)
m <- mapview::mapview(road2,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89471,
47.93648)
m@map %>% setView(coords[1], coords[2], zoom = 17)
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
plot(ctg)
plot(roadx,add=TRUE)
mapview::mapview(roadx,
layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
m1@map
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
library(leaflet)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
plot(ctg)
plot(shp,add=TRUE)
mapview::mapview(shp, layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
library(leaflet)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
# plot(ctg)
# plot(shp,add=TRUE)
mapview::mapview(list(ctg,shp), layer.name = "shapefile",
color = "red", map.type = "Esri.WorldImagery")
library(lidR)
library(sf)
library(MFFProads)
library(dplyr)
library(terra)
library(leaflet)
#--- read in laz and road shapefile ---#
ctg <- readLAScatalog("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/split")
shp <- st_read("F:/_2021_MFPProads/RMF/RMF_roads_SPL/1kmZ174330530902018L/roads_1kmZ174330530902018L.shp",quiet=TRUE)
# plot(ctg)
# plot(shp,add=TRUE)
mapview::mapview(list(ctg,shp), layer.name = c("catalog","roads"),
color = "red", map.type = "Esri.WorldImagery")
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
ctgx <- st_intersects(ctg,roadx)
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
ctgx <- st_intersects(ctg@polygons,roadx)
ctg@polygons
ctgx <- st_intersects(st_as_sf(ctg@polygons),roadx)
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 30032)
mapview::mapview(list(ctg,roadx), layer.name = c("catalog","road"),
color = "red", map.type = "Esri.WorldImagery")
m1 <- mapview::mapview(roadx,
layer.name = "road",
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m1@map %>% setView(coords[1], coords[2], zoom = 17)
m1 <- mapview::mapview(list(ctg,roadx), layer.name = c("catalog","road"),
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89212,
47.93482)
m1@map %>% setView(coords[1], coords[2], zoom = 17)
#--- test on single road ---#
roady <- shp %>%
dplyr::filter(OBJECTID == 29976)
m2 <- mapview::mapview(list(ctg,roady), layer.name = c("catalog","road"),
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89471,
47.93648)
m2@map %>% setView(coords[1], coords[2], zoom = 17)
options(MFFProads.debug.finding = TRUE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
options(MFFProads.debug.finding = TRUE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
options(MFFProads.debug.finding = TRUE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(road, ctg, mffproads_default_parameters, relocate = TRUE)
#--- test on single road ---#
roadx <- shp %>%
dplyr::filter(OBJECTID == 29976)
m2 <- mapview::mapview(list(ctg,roadx), layer.name = c("catalog","road"),
color = "red", map.type = "Esri.WorldImagery")
coords <- c(-81.89471,
47.93648)
m2@map %>% setView(coords[1], coords[2], zoom = 17)
options(MFFProads.debug.finding = TRUE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(roadx, ctg, mffproads_default_parameters, relocate = TRUE)
options(MFFProads.debug.finding = TRUE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(roadx, ctg, mffproads_default_parameters, relocate = TRUE)
options(MFFProads.debug.finding = FALSE)
options(MFFProads.debug.measuring = TRUE)
options(MFFProads.debug.metrics = FALSE)
res1 <- measure_road(roadx, ctg, mffproads_default_parameters, relocate = TRUE)
library(magick)
install.packages("magick")
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\detect", full.names = TRUE)
lirbary(magick)
library(magick)
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\detect", full.names = TRUE)
img_list <- lapply(imgs, image_read)
img_list
## animate at 2 frames per second
img_animated <- image_animate(img_joined, fps = 2)
## join the images together
img_joined <- image_join(img_list)
img_joined
## save to disk
image_write(image = img_joined,
path = "F:\\_2021_MFPProads\\roads_spl\\img\\detect\\detect.gif")
## animate at 2 frames per second
img_animated <- image_animate(img_joined, fps = 1)
## view animated image
img_animated
## save to disk
image_write(image = img_animated,
path = "F:\\_2021_MFPProads\\roads_spl\\img\\detect\\detect.gif")
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\measure", full.names = TRUE)
img_list <- lapply(imgs, image_read)
## join the images together
img_joined <- image_join(img_list)
## animate at 2 frames per second
img_animated <- image_animate(img_joined, fps = 1)
## view animated image
img_animated
## save to disk
image_write(image = img_animated,
path = "F:\\_2021_MFPProads\\roads_spl\\img\\measure\\measure.gif")
options(MFFProads.debug.finding = FALSE)
options(MFFProads.debug.measuring = TRUE)
options(MFFProads.debug.metrics = TRUE)
res1 <- measure_road(roadx, ctg, mffproads_default_parameters, relocate = TRUE)
options(MFFProads.debug.finding = FALSE)
options(MFFProads.debug.measuring = FALSE)
options(MFFProads.debug.metrics = TRUE)
res1 <- measure_road(roadx, ctg, mffproads_default_parameters, relocate = TRUE)
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\measure", full.names = TRUE)
img_list <- lapply(imgs, image_read)
## join the images together
img_joined <- image_join(img_list)
## animate at 2 frames per second
img_animated <- image_animate(img_joined, fps = 0.25)
## view animated image
img_animated
## save to disk
image_write(image = img_animated,
path = "F:\\_2021_MFPProads\\roads_spl\\img\\measure\\measure.gif")
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\detect", full.names = TRUE)
## list file names and read in
imgs <- list.files("F:\\_2021_MFPProads\\roads_spl\\img\\detect", full.names = TRUE)
img_list <- lapply(imgs, image_read)
## join the images together
img_joined <- image_join(img_list)
## animate at 2 frames per second
img_animated <- image_animate(img_joined, fps = 0.25)
## view animated image
img_animated
## save to disk
image_write(image = img_animated,
path = "F:\\_2021_MFPProads\\roads_spl\\img\\detect\\detect.gif")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
bookdown::render_book("index.Rmd", "bookdown::gitbook")
